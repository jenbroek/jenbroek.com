{{ define `main` }}
<style>
	.polaroid:hover {
		transform: scale(1.1) rotate(7.5deg);
		z-index: 1;
		transition: transform 0.1s;
	}
	.polaroid:hover::before {
		transform: translateY(0.8ch) scale(0.9) rotate(-7.5deg);
		transition: transform 0.1s;
	}

	main > p {
		margin: 3ch;
		text-align: center;
		color: var(--cl-75);
	}
</style>

{{ .Content }}

<section>
	<h2>Recent photos <a href="{{ relURL `/photos` }}" aria-label="More photos">→</a></h2>
	{{ with first 3 (site.GetPage `/photos`).RegularPages.ByDate.Reverse }}
	<ol class="noindent row nowrap clips" style="margin-bottom:3ch">
		{{ range . }}
			{{ $photos := partial `fn/vals` .Params.photos }}
		<li>
			<a href="{{ .RelPermalink }}" aria-label="{{ .LinkTitle }}">
				{{ $opts := (dict
					`Destination` (index $photos 0).src
					`Text` (index $photos 0).alt
					`Title` .LinkTitle
					`Class` `polaroid`
					`Sizes` (slice 250 500)
				)}}
				{{ partial `figure` $opts }}
			</a>
		</li>
		{{ end }}
	</ol>
	{{ else }}
		{{ partialCached `wip` . }}
	{{ end }}
</section>

<section>
	<h2>Recent posts <a href="{{ relURL `/posts` }}" aria-label="More posts">→</a></h2>
	{{ with first 4 (where site.RegularPages `Section` `posts`).ByDate.Reverse }}
	<ol class="noindent" style="margin-bottom:2ch">
		{{ range . }}
		<li>{{ partial `post/entry` (dict `Page` . `HL` 3) }}</li>
		{{ end }}
	</ol>
	{{ else }}
		{{ partialCached `wip` . }}
	{{ end }}
</section>
{{ end }}
